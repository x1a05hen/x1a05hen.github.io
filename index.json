[{"content":"准备工作 卸载旧版本 ​\t旧版本的Docker以docker、docker.io或docker-engine为名。在尝试安装新版本之前，先卸载任何此类旧版本。\nsudo apt-get remove docker docker-engine docker.io containerd runc ​\tapt-get 显示没有包，则证明没有安装过。若以前安装过docker，则还需清除镜像、容器等：\nsudo rm -rf /var/lib/docker sudo rm -rf /var/lib/containerd apt换源 ​\t备份源列表\nsudo cp /etc/apt/sources.list /etc/apt/sources.list.bak ​\t命令行打开sources.list文件\nsudo vim /etc/apt/sources.list ​\t将源文件内容全部注释,并添加以下任意源\n阿里云源\ndeb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse 清华源\ndeb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal universe deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates universe deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal multiverse deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates multiverse deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security universe deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security multiverse 中科大\ndeb https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse 安装 1. 设置仓库 ​\t在新主机上首次安装Docker引擎之前，需要设置Docker存储库。之后，可以从存储库安装和更新Docker。\n更新 apt 包索引 sudo apt update 安装 apt 依赖包，用于通过 HTTPS 来获取仓库： sudo apt install \\ apt-transport-https \\ ca-certificates \\ curl \\ gnupg-agent \\ software-properties-common 添加 Docker 的官方 GPG 密钥： curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - ok\n9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88 通过搜索指纹的后 8 个字符，验证您现在是否拥有带有指纹的密钥。 sudo apt-key fingerprint 0EBFCD88 pub rsa4096 2017-02-22 [SCEA] 9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88 uid [ unknown] Docker Release (CE deb) \u0026lt;docker@docker.com\u0026gt; sub rsa4096 2017-02-22 [S] 使用以下指令设置官方稳定版仓库(使用阿里云镜像库) sudo add-apt-repository \\ \u0026#34;deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu \\ $(lsb_release -cs) \\ stable\u0026#34; 2.安装 Docker Engine ​\t更新gpt\nsudo apt update 安装最新版本的 Docker Engine 和 containerd sudo apt install docker-ce docker-ce-cli containerd.io 安装特定版本的 Docker Engine: ​\t列出可用版本\napt-cache madison docker-ce ​\t使用第二列的版本号安装指定版本, 例如：5:20.10.23~3-0~ubuntu-focal\nsudo apt install docker-ce=\u0026lt;VERSION_STRING\u0026gt; docker-ce-cli=\u0026lt;VERSION_STRING\u0026gt; containerd.io ​\t等待安装完成\n3.测试 sudo docker run hello-world ​\t遇到问题\nCannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running? ​\t输入docker，会显示 \u0026ndash;help，证明docker安装成功，是没有启动\ncd /var/run service docker start ​\t之后再测试，则没有问题\nHello from Docker! This message shows that your installation appears to be working correctly. 其他工作 配置非root用户使用docker ​\t以非 root 用户运行 Docker，需要将用户添加到 docker 组\nsudo usermod -aG docker $USER ​\t重启 Docker\nsudo service docker restart ​\t退出当前用户重新登录，再查看\ndocker -v ​\tok\n配置Docker镜像加速 ​\t阿里云容器，生成自己的加速地址\n​\t登录：https://cr.console.aliyun.com/\n​\t点击 “创建我的容器镜像”，在左侧镜像工具下拉栏，找到镜像加速器，即可看到自己专属加速地址。\n​\t可以通过修改daemon配置文件/etc/docker/daemon.json来使用加速器\nsudo mkdir -p /etc/docker sudo tee /etc/docker/daemon.json \u0026lt;\u0026lt;-\u0026#39;EOF\u0026#39; { \u0026#34;registry-mirrors\u0026#34;: [\u0026#34;https://*****（此处为自己的地址）\u0026#34;] } EOF # 重启docker sudo service docker restart ### 注意 WSL没有systemctl ，所以只能用service ","permalink":"https://x1a05hen.github.io/posts/tech/docker-install/","summary":"准备工作 卸载旧版本 ​ 旧版本的Docker以docker、docker.io或docker-engine为名。在尝试安装新版本之前，先卸载任何","title":"WSL2 【Ubuntu 20.04 LTS】安装Docker"}]